<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Panel - Dr. Ahmed Dental Care</title>
  <link rel="stylesheet" href="../css/style.css">
  <style>
    .admin-container { max-width: 1400px; }
    .admin-nav {
      background: #f8f9fa;
      padding: 1rem;
      border-radius: 10px;
      margin-bottom: 2rem;
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
    }
    .admin-nav button {
      background: #0077b6;
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1rem;
      transition: background 0.3s;
    }
    .admin-nav button:hover {
      background: #0096c7;
    }
    .admin-nav button.active {
      background: #00b4d8;
    }
    .admin-section {
      display: none;
      background: white;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
    }
    .admin-section.active {
      display: block;
    }
    .appointments-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }
    .appointments-table th,
    .appointments-table td {
      padding: 1rem;
      text-align: left;
      border-bottom: 1px solid #e9ecef;
    }
    .appointments-table th {
      background: #f8f9fa;
      font-weight: 600;
      color: #0077b6;
    }
    .status-pending { background: #ffd166; color: #333; padding: 0.25rem 0.5rem; border-radius: 3px; font-size: 0.9rem; }
    .status-approved { background: #06d6a0; color: white; padding: 0.25rem 0.5rem; border-radius: 3px; font-size: 0.9rem; }
    .status-cancelled { background: #ef476f; color: white; padding: 0.25rem 0.5rem; border-radius: 3px; font-size: 0.9rem; }
    .status-completed { background: #118ab2; color: white; padding: 0.25rem 0.5rem; border-radius: 3px; font-size: 0.9rem; }
    .action-btn {
      background: #00b4d8;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 3px;
      cursor: pointer;
      margin-right: 0.5rem;
    }
    .action-btn:hover { background: #0096c7; }
    .action-btn.danger { background: #ef476f; }
    .action-btn.danger:hover { background: #d90429; }
    #logoutBtn {
      background: #ef476f;
      margin-left: auto;
    }
    #logoutBtn:hover { background: #d90429; }
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-bottom: 2rem;
    }
    .stat-card {
      background: #f8f9fa;
      padding: 1.5rem;
      border-radius: 10px;
      text-align: center;
    }
    .stat-card h3 {
      color: #0077b6;
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }
    .stat-card p { color: #666; }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar">
    <div class="container">
      <div class="logo">
        <h2>Dr. Ahmed Dental Care - Admin</h2>
      </div>
      <ul class="nav-links">
        <li><a href="../index.html">Home</a></li>
        <li><a href="#" id="logoutBtn" onclick="logout()">Logout</a></li>
      </ul>
    </div>
  </nav>

  <!-- Admin Content -->
  <section class="page-content">
    <div class="container admin-container">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
        <h1 style="color: #0077b6;">Admin Panel</h1>
        <div>Welcome, <strong id="adminName">Admin</strong>!</div>
      </div>

      <!-- Admin Navigation -->
      <div class="admin-nav">
        <button class="active" onclick="showSection('appointments')">Appointments</button>
        <button onclick="showSection('services')">Manage Services</button>
        <button onclick="showSection('patients')">Patients</button>
        <button onclick="showSection('addService')">Add Service</button>
        <button id="logoutBtnMobile" onclick="logout()" style="background: #ef476f;">Logout</button>
      </div>

      <!-- Appointments Section -->
      <div id="appointments" class="admin-section active">
        <h2 style="color: #0077b6; margin-bottom: 1rem;">Appointment Management</h2>
        <div class="stats-grid">
          <div class="stat-card">
            <h3 id="totalAppointments">0</h3>
            <p>Total Appointments</p>
          </div>
          <div class="stat-card">
            <h3 id="pendingAppointments">0</h3>
            <p>Pending</p>
          </div>
          <div class="stat-card">
            <h3 id="approvedAppointments">0</h3>
            <p>Approved</p>
          </div>
          <div class="stat-card">
            <h3 id="completedAppointments">0</h3>
            <p>Completed</p>
          </div>
        </div>
        <div style="overflow-x: auto;">
          <table class="appointments-table">
            <thead>
              <tr>
                <th>Patient</th>
                <th>Service</th>
                <th>Date</th>
                <th>Time</th>
                <th>Phone</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="appointmentsTableBody">
              <tr>
                <td colspan="7" style="text-align: center; padding: 2rem;">Loading appointments...</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Services Section -->
      <div id="services" class="admin-section">
        <h2 style="color: #0077b6; margin-bottom: 1rem;">Manage Services</h2>
        <div id="servicesListAdmin"></div>
      </div>

      <!-- Patients Section -->
      <div id="patients" class="admin-section">
        <h2 style="color: #0077b6; margin-bottom: 1rem;">Patients List</h2>
        <div id="patientsListAdmin"></div>
      </div>

      <!-- Add Service Section -->
      <div id="addService" class="admin-section">
        <h2 style="color: #0077b6; margin-bottom: 1rem;">Add New Service</h2>
        <form id="addServiceForm" style="max-width: 600px;">
          <div class="form-group">
            <label for="serviceName">Service Name *</label>
            <input type="text" id="serviceName" required>
          </div>
          <div class="form-group">
            <label for="serviceDescription">Description *</label>
            <textarea id="serviceDescription" rows="4" required></textarea>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="servicePrice">Price (PKR) *</label>
              <input type="number" id="servicePrice" min="0" required>
            </div>
            <div class="form-group">
              <label for="serviceDuration">Duration *</label>
              <input type="text" id="serviceDuration" placeholder="e.g., 30 minutes" required>
            </div>
          </div>
          <button type="submit" class="btn-primary" style="width: 100%; padding: 1rem; font-size: 1.1rem;">
            Add Service
          </button>
        </form>
        <div id="addServiceMessage" style="margin-top: 1rem;"></div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="container">
      <p>&copy; 2024 Dr. Ahmed Dental Care. All rights reserved.</p>
    </div>
  </footer>

  <script src="../js/main.js"></script>
  <script src="../js/admin.js"></script>
</body>
</html>
