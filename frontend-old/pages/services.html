<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Our Services - Dr. Ahmed Dental Care</title>
  <link rel="stylesheet" href="../css/style.css">
</head>

<body>
  <!-- Navigation -->
  <nav class="navbar">
    <div class="container">
      <div class="logo">
        <h2>Dr. Ahmed Dental Care</h2>
      </div>
      <ul class="nav-links">
        <li><a href="../index.html">Home</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="services.html" class="active">Services</a></li>
        <li><a href="contact.html">Contact</a></li>
        <li><a href="book-appointment.html" class="btn-primary">Book Appointment</a></li>
        <li><a href="login.html">Login</a></li>
      </ul>
    </div>
  </nav>

  <!-- Page Header -->
  <section class="page-header">
    <div class="container">
      <h1>Our Services</h1>
      <p>Comprehensive dental care for your entire family</p>
    </div>
  </section>

  <!-- Services Content -->
  <section class="page-content">
    <div class="container">
      <div class="services-list" id="servicesList">
        <!-- Services will be loaded dynamically -->
      </div>
      <div style="text-align: center; margin-top: 3rem;">
        <a href="book-appointment.html" class="btn-primary btn-large">Book Your Appointment</a>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="container">
      <p>&copy; 2024 Dr. Ahmed Dental Care. All rights reserved.</p>
    </div>
  </footer>

  <script src="../js/main.js"></script>
  <script>
    // Load services when page loads
    document.addEventListener('DOMContentLoaded', loadServices);

    async function loadServices() {
      try {
        const response = await fetch('/api/services');
        if (response.ok) {
          const data = await response.json();
          const servicesList = document.getElementById('servicesList');

          if (data.services.length === 0) {
            servicesList.innerHTML = '<p>No services available at the moment.</p>';
            return;
          }

          servicesList.innerHTML = data.services.map(service => `
            <div class="service-detail">
              <h3>${service.name}</h3>
              <p>${service.description}</p>
              <div class="service-price">PKR ${service.price.toLocaleString()}</div>
              <p><strong>Duration:</strong> ${service.duration}</p>
              <a href="book-appointment.html?service=${service._id}" class="btn-primary" style="display: inline-block; margin-top: 1rem;">Book Now</a>
            </div>
          `).join('');
        }
      } catch (error) {
        console.error('Failed to load services:', error);
        document.getElementById('servicesList').innerHTML =
          '<p style="color: red;">Failed to load services. Please refresh the page.</p>';
      }
    }
  </script>
</body>

</html>